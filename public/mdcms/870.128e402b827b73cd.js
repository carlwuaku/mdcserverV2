"use strict";(self.webpackChunkhire_tracker_app=self.webpackChunkhire_tracker_app||[]).push([[870],{9870:(K,S,p)=>{p.r(S),p.d(S,{SettingsModule:()=>G});var y=p(6895),w=p(9132),D=p(5412),_=p(5698),C=p(8864),j=p.n(C),t=p(4650),E=p(73),Z=p(8382),M=p(4006),A=p(4859),N=p(7392),F=p(266);function O(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,g=t.oxw();return t.KtG(g.removeItem(c))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function T(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,g=t.oxw();return t.KtG(g.undoRemove(c))}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}}function k(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,g=t.oxw();return t.KtG(g.moveUp(c))}),t.TgZ(1,"mat-icon"),t._uU(2,"keyboard_arrow_up"),t.qZA()()}}function I(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,g=t.oxw();return t.KtG(g.moveDown(c))}),t.TgZ(1,"mat-icon"),t._uU(2,"keyboard_arrow_down"),t.qZA()()}}const Y=function(o){return{removedItem:o}};function u(o,m){if(1&o&&(t.TgZ(0,"a",5),t._uU(1),t.TgZ(2,"span",6),t.YNc(3,O,3,0,"button",7),t.YNc(4,T,3,0,"button",8),t.YNc(5,k,3,0,"button",9),t.YNc(6,I,3,0,"button",10),t.qZA()()),2&o){const n=m.$implicit,r=m.index,c=t.oxw();t.Q6J("ngClass",t.VKq(6,Y,-1!=c.removedItems.indexOf(n))),t.xp6(1),t.hij("",n," "),t.xp6(2),t.Q6J("ngIf",-1==c.removedItems.indexOf(n)),t.xp6(1),t.Q6J("ngIf",-1!=c.removedItems.indexOf(n)),t.xp6(1),t.Q6J("ngIf",r>0),t.xp6(1),t.Q6J("ngIf",r<c.objects.length-1)}}let Q=(()=>{class o{constructor(){this.objects=[],this.valueChanged=new t.vpe,this.removedItems=[],this.newItem=""}removeItem(n){this.removedItems.push(n),this.emitValue()}addNew(){this.newItem.trim()?(this.objects.push(this.newItem),this.newItem="",this.emitValue()):alert("Please type something")}undoRemove(n){this.removedItems.splice(this.removedItems.indexOf(n),1),this.emitValue()}moveUp(n){let r=this.objects.indexOf(n);const c=this.objects.splice(r,1)[0];this.objects.splice(r-1,0,c),this.emitValue()}moveDown(n){let r=this.objects.indexOf(n);const c=this.objects.splice(r,1)[0];this.objects.splice(r+1,0,c),this.emitValue()}emitValue(){let n=this.objects.filter(r=>!this.removedItems.includes(r));this.valueChanged.emit(n)}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-array-editor"]],inputs:{objects:"objects"},outputs:{valueChanged:"valueChanged"},decls:9,vars:2,consts:[[1,"list-group"],[1,"list-group-item"],["name","new_item","type","text",3,"ngModel","ngModelChange"],["mat-flat-button","","type","button",1,"btn-success",3,"click"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-group-item",3,"ngClass"],[1,"pull-right"],["mat-icon-button","","class"," btn-danger","matTooltip","Mark item to be removed when saved",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Undo removal","class","btn-warning",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Move item one step up","class","btn-warning",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Move item one step down","class","btn-warning",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Mark item to be removed when saved",1,"btn-danger",3,"click"],["mat-icon-button","","matTooltip","Undo removal",1,"btn-warning",3,"click"],["mat-icon-button","","matTooltip","Move item one step up",1,"btn-warning",3,"click"],["mat-icon-button","","matTooltip","Move item one step down",1,"btn-warning",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label"),t._uU(3,"Add New"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"input",2),t.NdJ("ngModelChange",function(g){return r.newItem=g}),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return r.addNew()}),t._uU(7,"Add"),t.qZA()(),t.YNc(8,u,7,8,"a",4),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngModel",r.newItem),t.xp6(3),t.Q6J("ngForOf",r.objects))},dependencies:[y.mk,y.sg,y.O5,M.Fj,M.JJ,M.On,N.Hw,A.lW,A.RK,F.gM],styles:[".removedItem[_ngcontent-%COMP%]{color:red!important;text-decoration:line-through!important}"]}),o})();var H=p(9489),J=p(8659);function U(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"label")(2,"input",9),t.NdJ("ngModelChange",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setting.value=c)}),t.qZA(),t._uU(3," Yes"),t.qZA(),t.TgZ(4,"label")(5,"input",10),t.NdJ("ngModelChange",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setting.value=c)}),t.qZA(),t._uU(6," No"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngModel",n.setting.value),t.xp6(3),t.Q6J("ngModel",n.setting.value)}}function e(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"ckeditor",11),t.NdJ("ngModelChange",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setting.value=c)}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("editor",n.Editor)("ngModel",n.setting.value)}}function s(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-array-editor",12),t.NdJ("valueChanged",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setValue(c))}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("objects",n.arrayList)}}function i(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-json-editor",13),t.NdJ("valueChanged",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setValue(c))}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("jsonObject",n.jsonObject)}}function a(o,m){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"input",14),t.NdJ("keyup.enter",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.save())})("ngModelChange",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.setting.value=c)}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.setting.value)}}let f=(()=>{class o{constructor(n,r,c,g){this.dialogRef=n,this.setting=r,this.dbService=c,this.notify=g,this.Editor=j().Editor,this.arrayList=[],this.jsonObject={}}ngOnInit(){"list"===this.setting.control_type?"string"==typeof this.setting.value?this.arrayList=this.setting.value.split(";"):Array.isArray(this.setting.value)&&(this.arrayList=this.setting.value):"object"===this.setting.type&&(this.setting.control_type="object","string"==typeof this.setting.value?this.jsonObject=JSON.parse(this.setting.value):"object"==typeof this.setting.value&&null!==this.setting.value&&(this.jsonObject=this.setting.value))}closeDialog(){this.dialogRef.close(!1)}setValue(n){this.setting.value=n}save(){this.notify.showLoading(),this.dbService.put("admin/settings",{name:`${this.setting.class}.${this.setting.key}`,value:this.setting.value}).pipe((0,_.q)(1)).subscribe({next:r=>{this.notify.successNotification(r.message),this.dialogRef.close(!0)},error:r=>{this.notify.hideLoading()}})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(D.so),t.Y36(D.WI),t.Y36(E.O),t.Y36(Z.c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-settings"]],decls:16,vars:7,consts:[["mat-dialog-title",""],[1,"dialog-container"],[1,"wrap-text"],["mat-dialog-content",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mat-flat-button","","color","warn","type","button",3,"mat-dialog-close"],["mat-flat-button","","color","primary","type","button",3,"click"],["type","radio","name","value","value","yes",3,"ngModel","ngModelChange"],["type","radio","name","value","value","no",3,"ngModel","ngModelChange"],[3,"editor","ngModel","ngModelChange"],[3,"objects","valueChanged"],[3,"jsonObject","valueChanged"],["name","edit",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"]],template:function(n,r){1&n&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.YNc(6,U,7,2,"div",5),t.YNc(7,e,2,2,"div",5),t.YNc(8,s,2,1,"div",5),t.YNc(9,i,2,1,"div",5),t.YNc(10,a,2,1,"div",6),t.qZA()()()(),t.TgZ(11,"mat-dialog-actions")(12,"button",7),t._uU(13," Cancel "),t.qZA(),t.TgZ(14,"button",8),t.NdJ("click",function(){return r.save()}),t._uU(15," Save "),t.qZA()()),2&n&&(t.xp6(1),t.hij("Edit Setting: [",r.setting.key,"] "),t.xp6(4),t.Q6J("ngSwitch",r.setting.control_type),t.xp6(1),t.Q6J("ngSwitchCase","yes-no"),t.xp6(1),t.Q6J("ngSwitchCase","textarea"),t.xp6(1),t.Q6J("ngSwitchCase","list"),t.xp6(1),t.Q6J("ngSwitchCase","object"),t.xp6(3),t.Q6J("mat-dialog-close",!1))},dependencies:[y.RF,y.n9,y.ED,M.Fj,M._,M.JJ,M.On,D.ZT,D.uh,D.xY,D.H8,A.lW,Q,H.T,J.u]}),o})();var h=p(2924),v=p(3546),b=p(8683);const d=[{path:"",data:{title:"Settings"},component:(()=>{class o{constructor(n,r,c){this.dbService=n,this.notify=r,this.dialog=c,this.baseUrl="admin/settings",this.url="admin/settings",this.ts="",this.getActions=g=>[{label:"Edit",type:"button",onClick:V=>this.edit(V)}]}edit(n){this.dialog.open(f,{width:"70%",data:Object.assign({},n)}).afterClosed().subscribe(c=>{c&&this.updateTimestamp()})}updateTimestamp(){this.ts=(0,h.x2)("timestamp_string")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(E.O),t.Y36(Z.c),t.Y36(D.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],decls:4,vars:3,consts:[[1,"flex","flex-col","gap-1"],[3,"timestamp","url","getActions"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content"),t._UZ(3,"app-load-data-list",1),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("timestamp",r.ts)("url",r.url)("getActions",r.getActions))},dependencies:[v.a8,v.dn,b.f]}),o})()}];let x=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[w.Bz.forChild(d),w.Bz]}),o})();var R=p(7410);let G=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.ez,x,R.m,J.d]}),o})()},2924:(K,S,p)=>{function _(e="",s=null){let i=new Date;null!=s&&(i=new Date(s));let v,b,a=i.getDate(),f=i.getMonth()+1,h=i.getFullYear();v=a<10?"0"+a:a.toString(),b=f<10?"0"+f:f.toString();let l="",d="",x="";switch(e){case"timestamp":return l=C(i.getHours()),d=C(i.getMinutes()),x=C(i.getSeconds()),h+"-"+b+"-"+v+" "+l+":"+d+":"+x;case"timestamp_string":return l=C(i.getHours()),d=C(i.getMinutes()),x=C(i.getSeconds()),h+""+b+v+l+d+x;case"month":return b;case"year":return h.toString();default:return h+"-"+b+"-"+v}}function C(e){return e.toString().padStart(2,"0")}p.d(S,{x2:()=>_})}}]);