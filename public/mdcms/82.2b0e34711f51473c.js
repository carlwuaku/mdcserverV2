"use strict";(self.webpackChunkhire_tracker_app=self.webpackChunkhire_tracker_app||[]).push([[82],{4082:(X,Z,l)=>{l.r(Z),l.d(Z,{CpdModule:()=>E});var h=l(6895),u=l(9132),T=l(5698),s=l(5412),e=l(4650),M=l(7392),f=l(4859),N=l(3081);function U(i,r){if(1&i&&(e.TgZ(0,"div",6)(1,"mat-icon",7),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,t.config.icon))}}function S(i,r){if(1&i&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.config.secondaryButton)," ")}}function q(i,r){if(1&i&&(e.TgZ(0,"mat-dialog-actions",8)(1,"button",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,S,3,4,"button",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(3,3,t.config.primaryButton||"OK")," "),e.xp6(2),e.Q6J("ngIf",t.config.secondaryButton)}}let O=(()=>{class i{constructor(t,n){this.dialogRef=t,this.config=n,this.closeOnTimer=!0}ngOnInit(){var t;this.closeOnTimer=null===(t=this.config.closeOnTimer)||void 0===t||t}updateConfig(t){this.config=t}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.so),e.Y36(s.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["loxam-dialog"]],decls:9,vars:8,consts:[["mat-dialog-title",""],[1,"dialog-container"],["class","dialog-icon",4,"ngIf"],[1,"wrap-text"],["mat-dialog-content","",3,"innerHTML"],["align","end",4,"ngIf"],[1,"dialog-icon"],["inline",""],["align","end"],["mat-flat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","secondary","type","button",3,"mat-dialog-close",4,"ngIf"],["mat-flat-button","","color","secondary","type","button",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,U,4,3,"div",2),e.TgZ(5,"div",3),e._UZ(6,"div",4),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,q,5,5,"mat-dialog-actions",5)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,4,n.config.title)),e.xp6(3),e.Q6J("ngIf",n.config.icon),e.xp6(2),e.Q6J("innerHTML",e.lcZ(7,6,n.config.message),e.oJD),e.xp6(2),e.Q6J("ngIf",!n.config.closeOnTimer))},dependencies:[h.O5,s.ZT,s.uh,s.xY,s.H8,M.Hw,f.lW,N.X$],styles:[".mat-dialog-title[_ngcontent-%COMP%]{margin:0}.mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center}.mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:3.2rem 1.6rem 1.6rem}.dialog-container[_ngcontent-%COMP%]{display:flex}.dialog-icon[_ngcontent-%COMP%]{font-size:250%;padding-right:1.6rem}[_nghost-%COMP%]     .timer>.mat-dialog-actions{min-height:0px!important}"]}),i})();var p=l(1002),C=l(73),_=l(8382),d=l(4006);let Y=(()=>{class i{constructor(t,n,a,o){this.dialogRef=t,this.data=n,this.dbService=a,this.notify=o,this.message="",this.loading=!1,this.name="",this.id="",this.location="",this.phone="",this.email="",this.name=n.name,this.id=n.id,this.location=n.location,this.phone=n.phone,this.email=n.email}ngOnInit(){}submit(){this.notify.showLoading();let t=new FormData;t.append("name",this.name),t.append("location",this.location),t.append("email",this.email),t.append("phone",this.phone),this.id&&t.append("id",this.id),this.dbService.post(`${p.fv}/addCpdFacility`,t).pipe((0,T.q)(1)).subscribe({next:n=>{const a={name:this.name,location:this.location,phone:this.phone,email:this.email,id:n.data,number_organized:0};this.notify.successNotification("facility: "+this.name+" saved successfully"),this.dialogRef.close(a)},error:()=>{this.notify.noConnectionNotification()},complete:()=>{this.notify.hideLoading()}})}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.so),e.Y36(s.WI),e.Y36(C.O),e.Y36(_.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-cpd-facility"]],decls:31,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"flex-column","gap8"],[1,"flex-column"],["name","name","required","","placeholder"," facility name","name","name",3,"ngModel","ngModelChange"],["type","text","required","","placeholder","location","name","location",3,"ngModel","ngModelChange"],["type","text","required","","name","phone",3,"ngModel","ngModelChange"],["type","email","required","","name","email",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","","color","error",3,"click"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"CPD organizer"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2,3),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Organizer Name"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(o){return n.name=o}),e.qZA()(),e.TgZ(11,"div",5)(12,"label"),e._uU(13,"Location"),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"input",7),e.NdJ("ngModelChange",function(o){return n.location=o}),e.qZA()(),e.TgZ(16,"div",5)(17,"label"),e._uU(18,"Phone"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"input",8),e.NdJ("ngModelChange",function(o){return n.phone=o}),e.qZA()(),e.TgZ(21,"div",5)(22,"label"),e._uU(23,"Email"),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"input",9),e.NdJ("ngModelChange",function(o){return n.email=o}),e.qZA()()(),e.TgZ(26,"div",10)(27,"button",11),e.NdJ("click",function(){return n.closeDialog()}),e._uU(28,"Cancel"),e.qZA(),e.TgZ(29,"button",12),e._uU(30,"Save"),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",n.name),e.xp6(5),e.Q6J("ngModel",n.location),e.xp6(5),e.Q6J("ngModel",n.phone),e.xp6(5),e.Q6J("ngModel",n.email))},dependencies:[d.Fj,d.JJ,d.JL,d.Q7,d.On,d.F,s.uh,s.xY,s.H8,f.lW]}),i})();var D=l(2653),L=l(1481);let Q=(()=>{class i{constructor(t){this.title=t}setTitle(t){this.title.setTitle(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(L.Dx))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=l(6784),F=l(1950),w=l(5593),I=l(1740),R=l(2210),x=l(1795),P=l(5130);function z(i,r){1&i&&(e.TgZ(0,"h5"),e._uU(1,"Not permitted"),e.qZA())}let J=(()=>{class i{constructor(t,n,a,o,m,g,v,c){var b;this.titleService=t,this.dbService=n,this.notify=a,this.dateService=o,this.authService=m,this.dialog=g,this.activatedRoute=v,this.router=c,this.cpd={topic:"",credits:"",attendance_date:"",facility:void 0,venue:"",id:"",date:"",end_date:"",group:"",number_of_attendants:0,number_of_sessions:0,category:"",online:"",url:"",start_month:"",end_month:"",start_month_name:"",end_month_name:"",facility_id:"",facility_name:"",phone:"",email:""},this.can_view=!0,this.can_create=!0,this.can_delete=!0,this.groups=[],this.group="doctors",this.categories=["1","2","3"],this.months=[],this.cpdFacilitiesUrl=`${p.fv}/getAllCpdFacilities`,this.loading=!1,this.selectFacilityTimestamp="",this.titleService.setTitle("New CPD"),null!==(b=this.authService.currentUser)&&void 0!==b&&b.permissions.includes("Cpd.Content.Create")||(this.notify.notPermitted(),(0,D.fT)());const W=new Date;this.year=W.getFullYear().toString(),this.months=this.dateService.getMonthsNoPad(),this.id=this.activatedRoute.snapshot.params.id}ngOnInit(){this.id&&this.dbService.get(`${p.fv}/getCpdById/${this.id}`).pipe((0,T.q)(1)).subscribe({next:t=>{this.cpd=t.data,this.facility_id=t.data.facility_id,this.year=this.cpd.date.substring(0,4)}})}startAddFacility(){this.dialog.open(Y,{data:{name:"",location:"",phone:"",email:"",number_organized:0}}).afterClosed().subscribe(n=>{n&&(this.facility_id=n.id,this.selectFacilityTimestamp=this.dateService.getToday("timestamp"))})}setFacility(t){this.facility_id=t.id,this.selected_facility=t}submit(){this.notify.showLoading(),this.loading=!0;let t=new FormData;t.append("topic",this.cpd.topic),t.append("credits",this.cpd.credits),t.append("date",this.year+"-01-01"),t.append("facility_id",this.facility_id),t.append("group",this.group),t.append("category",this.cpd.category),t.append("online",this.cpd.online),t.append("url",this.cpd.url),t.append("start_month",this.cpd.start_month),t.append("end_month",this.cpd.end_month),this.id&&t.append("id",this.id),this.dbService.post(`${p.fv}/saveCpd`,t).subscribe({next:n=>{this.notify.showNotification("CPD added successfully","success",3e3),this.dialog.open(O,{data:{title:"Continue?",message:"Do you want to add another CPD event?",icon:"",primaryButton:"Yes",secondaryButton:"No",closeOnTimer:!1}}).afterClosed().subscribe(o=>{o||this.router.navigate(["/cpd"])})},error:()=>{this.notify.noConnectionNotification()},complete:()=>{this.notify.hideLoading(),this.loading=!1}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Q),e.Y36(C.O),e.Y36(_.c),e.Y36(A.R),e.Y36(F.e),e.Y36(s.uw),e.Y36(u.gz),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-form"]],decls:60,vars:16,consts:[[1,"content"],[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"card"],[1,"card-block"],[1,"col-md-6","justify-content-center"],["ngNativeValidate","",3,"ngSubmit"],["n","ngForm"],[1,"flex-column","gap8"],[1,"flex-column"],[1,"btn","btn-sm","btn-primary","waves-effect",3,"click"],[3,"timestamp","initialValue","url","selectionChanged"],["required","","name","topic","rows","4","cols","30",3,"ngModel","ngModelChange"],["name","start_month","optionValue","id","optionLabel","name",3,"options","ngModel","ngModelChange"],["name","end_month","optionValue","id","optionLabel","name",3,"options","ngModel","ngModelChange"],["pInputText","","name","year","type","number","required","",3,"ngModel","ngModelChange"],["pInputText","","name","credits","required","","type","number",3,"ngModel","ngModelChange"],["name","category",3,"options","ngModel","ngModelChange"],["required","","name","online",3,"ngModel","ngModelChange"],["value","1"],["value","0"],["pInputText","","name","url","size","40","type","url",3,"ngModel","ngModelChange"],["pButton","","pRipple","","type","submit",3,"loading"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Add new CPD event"),e.qZA(),e.YNc(5,z,2,0,"h5",3),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7,8),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(11,"div",9)(12,"i"),e._uU(13," All fields are required "),e.qZA(),e.TgZ(14,"div",10)(15,"label"),e._uU(16,"Select Organizer"),e.qZA(),e.TgZ(17,"div"),e._uU(18," If a facility is not in the list, "),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.startAddFacility()}),e._uU(20,"click here"),e.qZA(),e._uU(21," to add it "),e.qZA(),e.TgZ(22,"app-select-object",12),e.NdJ("selectionChanged",function(o){return n.setFacility(o)}),e.qZA()(),e.TgZ(23,"div",10)(24,"label"),e._uU(25,"Topic"),e.qZA(),e.TgZ(26,"textarea",13),e.NdJ("ngModelChange",function(o){return n.cpd.topic=o}),e.qZA()(),e.TgZ(27,"div",10)(28,"label"),e._uU(29,"Event Duration"),e.qZA(),e._uU(30," From "),e.TgZ(31,"p-dropdown",14),e.NdJ("ngModelChange",function(o){return n.cpd.start_month=o}),e.qZA(),e._uU(32," to "),e.TgZ(33,"p-dropdown",15),e.NdJ("ngModelChange",function(o){return n.cpd.end_month=o}),e.qZA()(),e.TgZ(34,"div",10)(35,"label"),e._uU(36,"Year"),e.qZA(),e.TgZ(37,"input",16),e.NdJ("ngModelChange",function(o){return n.year=o}),e.qZA()(),e.TgZ(38,"div",10)(39,"label"),e._uU(40,"Credits"),e.qZA(),e.TgZ(41,"input",17),e.NdJ("ngModelChange",function(o){return n.cpd.credits=o}),e.qZA()(),e.TgZ(42,"div",10)(43,"label"),e._uU(44,"Category"),e.qZA(),e.TgZ(45,"p-dropdown",18),e.NdJ("ngModelChange",function(o){return n.cpd.category=o}),e.qZA()(),e.TgZ(46,"div",10)(47,"label"),e._uU(48,"Available Online"),e.qZA(),e.TgZ(49,"select",19),e.NdJ("ngModelChange",function(o){return n.cpd.online=o}),e.TgZ(50,"option",20),e._uU(51,"Yes"),e.qZA(),e.TgZ(52,"option",21),e._uU(53,"No"),e.qZA()()(),e.TgZ(54,"div",10)(55,"label"),e._uU(56,"URL"),e.qZA(),e.TgZ(57,"input",22),e.NdJ("ngModelChange",function(o){return n.cpd.url=o}),e.qZA()(),e.TgZ(58,"button",23),e._uU(59,"Submit "),e.qZA()()()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!n.can_create),e.xp6(17),e.Q6J("timestamp",n.selectFacilityTimestamp)("initialValue",n.facility_id)("url",n.cpdFacilitiesUrl),e.xp6(4),e.Q6J("ngModel",n.cpd.topic),e.xp6(5),e.Q6J("options",n.months)("ngModel",n.cpd.start_month),e.xp6(2),e.Q6J("options",n.months)("ngModel",n.cpd.end_month),e.xp6(4),e.Q6J("ngModel",n.year),e.xp6(4),e.Q6J("ngModel",n.cpd.credits),e.xp6(4),e.Q6J("options",n.categories)("ngModel",n.cpd.category),e.xp6(4),e.Q6J("ngModel",n.cpd.online),e.xp6(8),e.Q6J("ngModel",n.cpd.url),e.xp6(1),e.Q6J("loading",n.loading))},dependencies:[h.O5,w.Hq,I.o,R.Lt,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.JL,d.Q7,d.On,d.F,x.H,P.M]}),i})();var j=l(8683);const B=function(){return["/cpd/add"]};let y=(()=>{class i{constructor(t,n,a,o){var m,g;this.dbService=t,this.dateService=n,this.notify=a,this.authService=o,this.can_edit=!1,this.can_delete=!1,this.base_url=`${p.fv}/getCpds`,this.url="",this.timestamp="",this.columnDefs=[{headerName:"#",valueGetter:"node.rowIndex + 1",width:80,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"Menu",sortable:!0,cellClass:"bordered",cellRenderer:"DataListMenuButtonComponent",cellRendererParams:c=>({actions:[{label:"View",type:"link",link:`cpd/details/${c.data.id}`},{label:"Edit",type:"link",link:`cpd/edit/${c.data.id}`},{label:"Delete",type:"button",onClick:()=>{this.delete(c.data.id)}}]}),filter:!0},{headerName:"Topic",sortable:!0,cellClass:"bordered",cellRenderer:"LinkNameComponent",cellRendererParams:c=>({link:`cpd/details/${c.data.id}`,label:c.data.topic}),filter:!0},{headerName:"Credits",field:"credits",sortable:!0,cellClass:"bordered",filter:!0},{headerName:"Category",field:"category",sortable:!0,cellClass:"bordered",filter:!0},{headerName:"Created On",field:"created_on",sortable:!0,cellClass:"bordered",filter:!0},{headerName:"Organizer",field:"facility_name",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"Phone",field:"facility_phone",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"Email",field:"email",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"No. of attendants",field:"number_of_attendants",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"No. of sessions",field:"number_of_sessions",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"Online",field:"online",sortable:!0,editable:!0,cellClass:"bordered",filter:!0},{headerName:"URL",field:"url",sortable:!0,editable:!0,cellClass:"bordered",filter:!0}],this.rowHeight=function(c){return 55},!(null===(m=this.authService.currentUser)||void 0===m)&&m.permissions.includes("Cpd.Content.Edit")&&(this.can_edit=!0),null!==(g=this.authService.currentUser)&&void 0!==g&&g.permissions.includes("Cpd.Content.Delete")&&(this.can_delete=!0);var v=new Date;this.year=v.getFullYear().toString()}ngOnInit(){this.setUrl()}setUrl(){this.url=this.base_url+"?year="+this.year}delete(t){if(this.can_delete){if(window.confirm("Sure you want to delete this cpd? You cannot undo this")){this.notify.showLoading();let n=new FormData;n.append("id",t),this.dbService.post(`${p.fv}/deleteCpd`,n).subscribe({next:a=>{this.notify.successNotification("cpd deleted successfully"),this.timestamp=this.dateService.getToday("timestamp_string")},error:a=>{},complete:()=>{this.notify.hideLoading()}})}}else alert("You are not permitted to perform this action")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.O),e.Y36(A.R),e.Y36(_.c),e.Y36(F.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cpd"]],decls:19,vars:4,consts:[[1,"content"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"card"],[1,"card-header"],["ngNativeValidate","",1,"",3,"ngSubmit"],["n","ngForm"],["required","","type","number","name","year","value","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary","type","submit"],[1,"card-body"],[3,"url"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"LIST OF CPD EVENTS "),e.TgZ(3,"small")(4,"button",1)(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," Add a new CPD event "),e.qZA()()(),e.TgZ(8,"div",2)(9,"div",3)(10,"form",4,5),e.NdJ("ngSubmit",function(){return n.setUrl()}),e.TgZ(12,"label"),e._uU(13,"Select year"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(o){return n.year=o}),e.qZA(),e.TgZ(15,"button",7),e._uU(16,"Query"),e.qZA()()(),e.TgZ(17,"div",8),e._UZ(18,"app-load-data-list",9),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(3,B)),e.xp6(10),e.Q6J("ngModel",n.year),e.xp6(4),e.Q6J("url",n.url))},dependencies:[u.rH,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.On,d.F,M.Hw,f.lW,j.f]}),i})();const V=[{path:"",component:y},{path:"list_cpd",component:y},{path:"add",component:J},{path:"edit/:id",component:J},{path:"details/:id",component:y}];let $=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(V),u.Bz]}),i})();var H=l(7410);let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,$,H.m]}),i})()}}]);