"use strict";(self.webpackChunkhire_tracker_app=self.webpackChunkhire_tracker_app||[]).push([[634],{1634:(st,I,p)=>{p.r(I),p.d(I,{ApplicationTemplatesModule:()=>pt});var _=p(6895),h=p(9132),$=p(4440),H=p(2924),e=p(4650),w=p(73),q=p(8382),T=p(5412),K=p(2843);let J=(()=>{class o{constructor(t,i){this.dbService=t,this.notify=i,this.url="applications/templates"}delete(t){return window.confirm("Are you sure you want to delete this template permanently? It will not affect any existing applications, but you will have to create a new one if you need it again.")?this.dbService.delete(`${this.url}/${t}`):(0,K._)(()=>new Error("User cancelled delete"))}update(t,i){const n=new FormData;return Object.keys(i).forEach(l=>{n.append(l,i[l])}),n.append("uuid",t),this.dbService.put(`${this.url}/${t}`,n)}getTemplate(t){return this.notify.showLoading(),this.dbService.get(`${this.url}/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(w.O),e.LFG(q.c))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var b=p(3546),v=p(4859),P=p(8683);let R=(()=>{class o{constructor(t,i,n,l,m){this.dbService=t,this.notify=i,this.dialog=n,this.templateService=l,this.ar=m,this.baseUrl="applications/templates",this.url="applications/templates",this.ts="",this.getActions=s=>[{label:"Preview",type:"link",link:"application-templates/preview/",linkProp:"uuid"},{label:"Edit",type:"link",link:"application-templates/form/",linkProp:"uuid"},{label:"Delete",type:"button",onClick:d=>this.delete(d)}]}ngOnInit(){this.setUrl()}ngOnChanges(t){this.setUrl()}setUrl(){this.url=this.baseUrl}delete(t){this.templateService.delete(t.uuid).subscribe({next:i=>{this.notify.successNotification(i.message),this.updateTimestamp()},error:i=>{}})}view(t){const i=Object.assign({},t);delete i.actions,this.dialog.open($.C,{data:{object:i,title:"Application Form"},maxHeight:"90vh",maxWidth:"90vw"})}updateTimestamp(){this.ts=(0,H.x2)("timestamp_string")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.O),e.Y36(q.c),e.Y36(T.uw),e.Y36(J),e.Y36(h.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-application-templates"]],features:[e.TTD],decls:6,vars:3,consts:[[1,"flex","flex-col","gap-1"],["mat-raised-button","","color","primary","routerLink","/application-templates/form"],[3,"timestamp","url","getActions"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"Add a new template"),e.qZA(),e.TgZ(3,"mat-card")(4,"mat-card-content"),e._UZ(5,"app-load-data-list",2),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("timestamp",i.ts)("url",i.url)("getActions",i.getActions))},dependencies:[h.rH,b.a8,b.dn,v.zs,P.f]}),o})();var r=p(4006),V=p(5698),x=p(9549),y=p(4144),Z=p(6257),O=p(1388),A=p(6841);function j(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Label"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(n){const m=e.CHM(t).$implicit;return e.KtG(m.key=n)}),e.qZA()(),e.TgZ(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Value"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(n){const m=e.CHM(t).$implicit;return e.KtG(m.value=n)}),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(4),e.Q6J("ngModel",t.key),e.xp6(4),e.Q6J("ngModel",t.value)}}let D=(()=>{class o{constructor(t,i){this.dialogRef=t,this.data=i,this.newkey="",this.newValue=""}onNoClick(){this.dialogRef.close()}submit(){this.dialogRef.close(this.data.options)}addOption(){this.data.options.push({key:this.newkey,value:this.newValue}),this.newkey="",this.newValue=""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.so),e.Y36(T.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-options-editor"]],decls:25,vars:6,consts:[["mat-dialog-title",""],[1,"flex-col","gap-1"],[1,"flex","gap-2","justify-between"],["matInput","",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"p"),e._uU(4,"Labels are what the user sees in the dropdown, values are what is submitted to the server "),e.qZA(),e.TgZ(5,"div",1)(6,"b"),e._uU(7,"Add a new option"),e.qZA(),e.TgZ(8,"div",2)(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Label"),e.qZA(),e.TgZ(12,"input",3),e.NdJ("ngModelChange",function(l){return i.newkey=l}),e.qZA()(),e.TgZ(13,"mat-form-field")(14,"mat-label"),e._uU(15,"Value"),e.qZA(),e.TgZ(16,"input",3),e.NdJ("ngModelChange",function(l){return i.newValue=l}),e.qZA()(),e.TgZ(17,"button",4),e.NdJ("click",function(){return i.addOption()}),e._uU(18,"Add"),e.qZA()(),e.YNc(19,j,9,2,"div",5),e.qZA()(),e.TgZ(20,"mat-dialog-actions")(21,"button",6),e._uU(22,"Cancel"),e.qZA(),e.TgZ(23,"button",7),e._uU(24,"Ok"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",i.data.label,""),e.xp6(11),e.Q6J("ngModel",i.newkey),e.xp6(4),e.Q6J("ngModel",i.newValue),e.xp6(3),e.Q6J("ngForOf",i.data.options),e.xp6(2),e.Q6J("mat-dialog-close",null),e.xp6(2),e.Q6J("mat-dialog-close",i.data.options))},dependencies:[_.sg,r.Fj,r.JJ,r.On,T.ZT,T.uh,T.xY,T.H8,v.lW,x.KE,x.hX,y.Nt]}),o})();var L=p(3608),z=p(7392),M=p(1561),B=p(4385),W=p(3238),X=p(5130),ee=p(1712);function te(o,a){1&o&&e.GkF(0)}const N=function(o){return{selected:o}},C=function(o){return{$implicit:o}};function oe(o,a){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,te,1,0,"ng-container",22),e.qZA()),2&o){const t=a.$implicit,i=e.oxw(3),n=e.MAs(14);e.Q6J("ngClass",e.VKq(3,N,t===i.selectedItem)),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,C,t))}}function ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.addFieldToRow(m,l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function ne(o,a){1&o&&e.GkF(0)}function ae(o,a){if(1&o&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e.YNc(3,oe,2,7,"div",19),e.qZA(),e.TgZ(4,"span")(5,"button",20),e._uU(6,"Add item to row"),e.qZA(),e.TgZ(7,"mat-menu",null,21),e.YNc(9,ie,2,1,"button",6),e.qZA()()(),e.YNc(10,ne,1,0,"ng-container",22),e.qZA()),2&o){const t=e.MAs(8),i=e.oxw().$implicit,n=e.oxw(),l=e.MAs(20);e.xp6(3),e.Q6J("ngForOf",i),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.Q6J("ngForOf",n.inputTypes),e.xp6(1),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.VKq(5,C,i))}}function le(o,a){1&o&&e.GkF(0)}function re(o,a){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,le,1,0,"ng-container",22),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(),n=e.MAs(14);e.Q6J("ngClass",e.VKq(3,N,t===i.selectedItem)),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,C,t))}}function me(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ae,11,7,"div",14),e.YNc(2,re,2,7,"div",15),e.BQk()),2&o){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.isRow(t)),e.xp6(1),e.Q6J("ngIf",i.isFormField(t))}}function pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.addField(l))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function se(o,a){1&o&&(e.TgZ(0,"div",25),e._uU(1,"Select a field to edit its properties"),e.qZA())}function de(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ue(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const _e=function(){return["select","search","datalist"]};function ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",26)(1,"mat-form-field",27)(2,"label"),e._uU(3,"Label"),e.qZA(),e.TgZ(4,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.label=n)}),e.qZA()(),e.TgZ(5,"mat-form-field",27)(6,"label"),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"div",29),e._uU(9,"Typically this the name submitted to the server"),e.qZA(),e.TgZ(10,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.name=n)}),e.qZA()(),e.TgZ(11,"mat-form-field",27)(12,"label"),e._uU(13,"Hint"),e.qZA(),e.TgZ(14,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.hint=n)}),e.qZA()(),e.TgZ(15,"mat-form-field",27)(16,"label"),e._uU(17,"Required"),e.qZA(),e.TgZ(18,"mat-select",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.required=n)}),e.TgZ(19,"mat-option",31),e._uU(20,"Yes"),e.qZA(),e.TgZ(21,"mat-option",31),e._uU(22,"No"),e.qZA()()(),e.TgZ(23,"div",32)(24,"label"),e._uU(25,"Options"),e.qZA(),e.TgZ(26,"button",33),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openOptionsDialog())}),e._uU(27),e.qZA()(),e.TgZ(28,"mat-form-field",27)(29,"label"),e._uU(30,"Show Only"),e.qZA(),e.TgZ(31,"mat-select",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.showOnly=n)}),e.TgZ(32,"mat-option",31),e._uU(33,"Yes"),e.qZA(),e.TgZ(34,"mat-option",31),e._uU(35,"No"),e.qZA()()(),e.TgZ(36,"mat-form-field",27)(37,"label"),e._uU(38,"Type"),e.qZA(),e.TgZ(39,"mat-select",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.type=n)}),e.YNc(40,de,2,2,"mat-option",34),e.qZA()(),e.TgZ(41,"mat-form-field",27)(42,"label"),e._uU(43,"API Type"),e.qZA(),e.TgZ(44,"mat-select",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.apiType=n)}),e.YNc(45,ue,2,2,"mat-option",34),e.qZA()(),e.TgZ(46,"mat-form-field",27)(47,"label"),e._uU(48,"API URL"),e.qZA(),e.TgZ(49,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.api_url=n)}),e.qZA()(),e.TgZ(50,"mat-form-field",27)(51,"label"),e._uU(52,"API Label Property"),e.qZA(),e.TgZ(53,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedItem.apiLabelProperty=n)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.selectedItem.label),e.xp6(6),e.Q6J("ngModel",t.selectedItem.name),e.xp6(4),e.Q6J("ngModel",t.selectedItem.hint),e.xp6(4),e.Q6J("ngModel",t.selectedItem.required),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(6),e.hij("",t.selectedItem.options.length," Set. Edit/View Options"),e.xp6(4),e.Q6J("ngModel",t.selectedItem.showOnly),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(5),e.Q6J("ngModel",t.selectedItem.type),e.xp6(1),e.Q6J("ngForOf",t.inputTypes),e.xp6(4),e.Q6J("ngModel",t.selectedItem.apiType),e.xp6(1),e.Q6J("ngForOf",e.DdM(16,_e)),e.xp6(4),e.Q6J("ngModel",t.selectedItem.api_url),e.xp6(4),e.Q6J("ngModel",t.selectedItem.apiLabelProperty)}}function ge(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function fe(o,a){1&o&&e.GkF(0)}function he(o,a){if(1&o&&(e.TgZ(0,"div",40),e.YNc(1,fe,1,0,"ng-container",22),e.qZA()),2&o){const t=e.oxw().$implicit;e.oxw();const i=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,C,t))}}function Te(o,a){1&o&&e.GkF(0)}function ve(o,a){if(1&o&&(e.TgZ(0,"div",40),e.YNc(1,Te,1,0,"ng-container",22),e.qZA()),2&o){const t=e.oxw().$implicit;e.oxw();const i=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,C,t))}}function xe(o,a){1&o&&e.GkF(0)}function Ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.setSelectedField(l))}),e.TgZ(1,"label"),e._uU(2),e.YNc(3,ge,2,0,"span",36),e.qZA(),e.TgZ(4,"div",37),e._uU(5),e.qZA(),e.TgZ(6,"div",38),e.YNc(7,he,2,4,"div",39),e.YNc(8,ve,2,4,"div",39),e.YNc(9,xe,1,0,"ng-container",22),e.qZA()()}if(2&o){const t=a.$implicit,i=e.oxw(),n=e.MAs(20);e.Q6J("ngClass",e.VKq(8,N,t===i.selectedItem)),e.xp6(2),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",t.required),e.xp6(2),e.Oqu(t.hint),e.xp6(2),e.Q6J("ngIf",!0===t.showOnly),e.xp6(1),e.Q6J("ngIf",!t.showOnly),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(10,C,t))}}function Fe(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.$implicit.value," ")}function Ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"input",49),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw(2).$implicit;return e.KtG(l.value=n)}),e.qZA(),e._uU(2),e.qZA()}if(2&o){const t=a.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.s9C("name",i.name),e.Q6J("value",t.value)("ngModel",i.value),e.xp6(1),e.hij(" ",t.key,"")}}function be(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ze,3,4,"span",2),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.options)}}function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"input",50),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw(2).$implicit;return e.KtG(l.value=n)}),e.qZA(),e._uU(2),e.qZA()}if(2&o){const t=a.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.s9C("name",i.name),e.Q6J("value",t.value)("ngModel",i.value),e.xp6(1),e.hij(" ",t.key,"")}}function we(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ae,3,4,"span",2),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.options)}}function qe(o,a){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function Je(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-select",51),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.value=n)}),e.TgZ(1,"mat-option",52),e._uU(2,"None"),e.qZA(),e.YNc(3,qe,2,2,"mat-option",34),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.s9C("name",t.name),e.Q6J("required",t.required)("ngModel",t.value),e.xp6(3),e.Q6J("ngForOf",t.options)}}function ye(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"textarea",53),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.value=n)}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.s9C("name",t.name),e.Q6J("required",t.required)("ngModel",t.value)}}function Me(o,a){if(1&o&&e._UZ(0,"app-file-uploader",54),2&o){const t=e.oxw().$implicit;e.Q6J("existingImage",t.value)}}function Ne(o,a){if(1&o&&e._UZ(0,"app-ckeditor",55),2&o){const t=e.oxw().$implicit;e.Q6J("name",t.name)}}function Ue(o,a){if(1&o&&e._UZ(0,"app-select-object",56),2&o){const t=e.oxw().$implicit;e.Q6J("url",t.api_url)("labelProperty",t.apiLabelProperty||"")("keyProperty",t.apiKeyProperty||"")("type",t.apiType)("initialValue",t.value)}}function Ge(o,a){if(1&o&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.key)}}function Qe(o,a){if(1&o&&(e.TgZ(0,"datalist",59),e.YNc(1,Ge,2,2,"option",34),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.MGl("id","",t.name,"_datalist"),e.xp6(1),e.Q6J("ngForOf",t.options)}}function Ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"input",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.value=n)}),e.qZA(),e.YNc(2,Qe,2,2,"datalist",58),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.s9C("type",t.type),e.s9C("name",t.name),e.Q6J("required",t.required)("ngModel",t.value),e.uIk("list",t.name+"_datalist"),e.xp6(1),e.Q6J("ngIf",t.options.length>0)}}function Ie(o,a){1&o&&(e.ynx(0,41),e.YNc(1,be,2,1,"div",42),e.YNc(2,we,2,1,"div",42),e.YNc(3,Je,4,4,"mat-select",43),e.YNc(4,ye,1,3,"textarea",44),e.YNc(5,Me,1,1,"app-file-uploader",45),e.YNc(6,Ne,1,1,"app-ckeditor",46),e.YNc(7,Ue,1,5,"app-select-object",47),e.YNc(8,Ee,3,6,"span",48),e.BQk()),2&o&&(e.Q6J("ngSwitch",a.$implicit.type),e.xp6(1),e.Q6J("ngSwitchCase","radio"),e.xp6(1),e.Q6J("ngSwitchCase","checkbox"),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","textarea"),e.xp6(1),e.Q6J("ngSwitchCase","picture"),e.xp6(1),e.Q6J("ngSwitchCase","html"),e.xp6(1),e.Q6J("ngSwitchCase","api"))}function Oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",60)(1,"button",61),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.moveFieldUp(l))}),e.TgZ(2,"mat-icon"),e._uU(3,"arrow_upward"),e.qZA()(),e.TgZ(4,"button",62),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.moveFieldDown(l))}),e.TgZ(5,"mat-icon"),e._uU(6,"arrow_downward"),e.qZA()(),e.TgZ(7,"button",63),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteField(l))}),e.TgZ(8,"mat-icon"),e._uU(9,"remove"),e.qZA()()()}}let ke=(()=>{class o{constructor(t){this.dialog=t,this.fields=[],this.formChanged=new e.vpe,this.isRow=A.jC,this.isFormField=A.sw,this.inputTypes=["text","email","password","number","date","time","tel","url","checkbox","radio","select","textarea","file","button","submit","reset","hidden","html","json","api"]}ngOnInit(){}addField(t){this.fields.push({label:`Field ${this.fields.length+1}`,name:"",hint:"",options:[],type:t,value:"",required:!1,api_url:"",apiKeyProperty:"",apiLabelProperty:"",showOnly:!1}),this.selectedItem=this.fields[this.fields.length-1],("checkbox"===t||"radio"===t||"select"===t)&&this.openOptionsDialog(),this.formChanged.emit(this.fields)}addRow(){this.fields.push([]),this.formChanged.emit(this.fields)}addFieldToRow(t,i){t.push(new A.Wi(i)),this.formChanged.emit(this.fields)}moveRowFieldUp(t,i){const n=t.indexOf(i);n>0&&([t[n-1],t[n]]=[t[n],t[n-1]]),this.formChanged.emit(this.fields)}moveRowFieldDown(t,i){const n=t.indexOf(i);n<t.length-1&&([t[n+1],t[n]]=[t[n],t[n+1]]),this.formChanged.emit(this.fields)}deleteField(t){const i=this.fields.findIndex(n=>(0,A.sw)(n)&&n.name===t);-1!==i&&this.fields.splice(i,1),this.formChanged.emit(this.fields)}removeRow(){}moveFieldUp(t){const i=this.fields.indexOf(t);i>0&&([this.fields[i-1],this.fields[i]]=[this.fields[i],this.fields[i-1]]),this.formChanged.emit(this.fields)}moveFieldDown(t){const i=this.fields.indexOf(t);i<this.fields.length-1&&([this.fields[i+1],this.fields[i]]=[this.fields[i],this.fields[i+1]]),this.formChanged.emit(this.fields)}editField(){}setSelectedField(t){this.selectedItem=t}openOptionsDialog(){this.dialog.open(D,{width:"70vw",data:{label:this.selectedItem.label,options:this.selectedItem.options}}).afterClosed().subscribe(i=>{i&&(this.selectedItem.options=i),this.formChanged.emit(this.fields)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form-editor"]],inputs:{fields:"fields"},outputs:{formChanged:"formChanged"},decls:21,vars:5,consts:[[1,"w-full","flex"],[1,"flex","flex-col","gap-1","w-9/12","border","p-2","h-[500px]","max-h-[500px]","overflow-auto"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"matMenuTriggerFor"],["addMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"flex-col","w-3/12","border","p-2","h-[500px]","max-h-[500px]","overflow-auto"],["class","flex justify-center text-gray-600",4,"ngIf"],["class","border-dashed border p-1 flex flex-col gap-1",4,"ngIf"],["editorContainer",""],["renderReadOnly",""],["renderField",""],["editorControls",""],["class","flex flex-col gap-1 p-2 border-dashed border",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"flex","flex-col","gap-1","p-2","border-dashed","border"],[1,"flex","gap-1"],[1,"flex","gap-1","justify-between","flex-grow","overflow-x-auto"],["class","flex formField flex-col flex-grow",3,"ngClass",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],["addToRowMenu","matMenu"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","formField","flex-col","flex-grow",3,"ngClass"],[3,"ngClass"],[1,"flex","justify-center","text-gray-600"],[1,"border-dashed","border","p-1","flex","flex-col","gap-1"],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],[1,"font-thin"],[3,"ngModel","ngModelChange"],[3,"value"],[1,"flex-col","gap-1"],["mat-raised-button","",3,"click"],[3,"value",4,"ngFor","ngForOf"],[1,"border-dashed","border","p-1","hover:bg-white","border-blue-500","cursor-pointer",3,"ngClass","click"],[4,"ngIf"],[1,"text-muted"],[1,"flex","flex-col"],["class","flex-grow",4,"ngIf"],[1,"flex-grow"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","form-control","appearance","outline",3,"required","ngModel","name","ngModelChange",4,"ngSwitchCase"],["class","form-control",3,"required","ngModel","name","ngModelChange",4,"ngSwitchCase"],[3,"existingImage",4,"ngSwitchCase"],[3,"name",4,"ngSwitchCase"],[3,"url","labelProperty","keyProperty","type","initialValue",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","radio",3,"value","ngModel","name","ngModelChange"],["type","checkbox",3,"value","ngModel","name","ngModelChange"],["appearance","outline",1,"form-control",3,"required","ngModel","name","ngModelChange"],["value",""],[1,"form-control",3,"required","ngModel","name","ngModelChange"],[3,"existingImage"],[3,"name"],[3,"url","labelProperty","keyProperty","type","initialValue"],[1,"form-control",3,"required","type","ngModel","name","ngModelChange"],[3,"id",4,"ngIf"],[3,"id"],[1,"flex","flex-grow-0","gap-1","border-dashed"],["mat-icon-button","","color","primary","pTooltip","Move this field up",3,"click"],["mat-icon-button","","color","primary","pTooltip","Move this field down",3,"click"],["mat-icon-button","","color","danger","pTooltip","Delete this field",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,me,3,2,"ng-container",2),e.TgZ(3,"button",3),e._uU(4,"Add Item"),e.qZA(),e.TgZ(5,"mat-menu",null,4)(7,"button",5),e.NdJ("click",function(){return i.addRow()}),e._uU(8,"Row"),e.qZA(),e.YNc(9,pe,2,1,"button",6),e.qZA()(),e.TgZ(10,"div",7),e.YNc(11,se,2,0,"div",8),e.YNc(12,ce,54,17,"div",9),e.qZA(),e.YNc(13,Ce,10,12,"ng-template",null,10,e.W1O),e.YNc(15,Fe,1,1,"ng-template",null,11,e.W1O),e.YNc(17,Ie,9,8,"ng-template",null,12,e.W1O),e.YNc(19,Oe,10,0,"ng-template",null,13,e.W1O),e.qZA()),2&t){const n=e.MAs(6);e.xp6(2),e.Q6J("ngForOf",i.fields),e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(6),e.Q6J("ngForOf",i.inputTypes),e.xp6(2),e.Q6J("ngIf",!i.selectedItem),e.xp6(1),e.Q6J("ngIf",i.selectedItem)}},dependencies:[_.mk,_.sg,_.O5,_.tP,_.RF,_.n9,_.ED,L.u,r.YN,r.Kr,r.Fj,r.Wl,r._,r.JJ,r.Q7,r.On,z.Hw,v.lW,v.RK,M.VK,M.OP,M.p6,x.KE,B.gD,W.ey,y.Nt,X.M,ee.G,O.s],styles:[".selected[_ngcontent-%COMP%]{border:1px dashed blue;border-radius:5px;white-space:nowrap;transition:all .3s}"]}),o})();function Ye(o,a){1&o&&e._uU(0,"General Information")}function Se(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function $e(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function He(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function Ke(o,a){1&o&&e._uU(0,"Guidelines")}function Pe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function Re(o,a){1&o&&e._uU(0,"Form Fields")}function Ve(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function je(o,a){1&o&&e._uU(0,"Header")}function De(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function Le(o,a){1&o&&e._uU(0,"Footer")}function ze(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function Be(o,a){1&o&&e._uU(0,"On Submit Templates")}function We(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}function Xe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Required field"),e.qZA())}let k=(()=>{class o{constructor(t,i,n,l,m){this.router=i,this.notify=n,this.dbService=l,this.templateService=m,this.title="Add a new practitioner",this.formUrl="applications/templates",this.existingUrl="applications/templates",this.fields=[],this.guidelines="",this.header="",this.footer="",this.on_submit_email="",this.on_submit_message="",this.extraFormData=[],this.generalFormGroup=new r.cw({form_name:new r.NI("",r.kI.required),open_date:new r.NI("",r.kI.required),close_date:new r.NI("",r.kI.required)}),this.guidlinesFormGroup=new r.cw({guidelines:new r.NI("",r.kI.required)}),this.dataFormGroup=new r.cw({data:new r.NI("",r.kI.required)}),this.headerFormGroup=new r.cw({header:new r.NI("",r.kI.required)}),this.footerFormGroup=new r.cw({footer:new r.NI("",r.kI.required)}),this.onSubmitFormGroup=new r.cw({on_submit_email:new r.NI("",r.kI.required),on_submit_message:new r.NI("",r.kI.required)}),this.loading=!1,this.id=t.snapshot.params.id,this.id&&(this.title="Edit application template",this.existingUrl=`applications/templates/${this.id}`,this.formUrl=`applications/templates/${this.id}`,this.extraFormData=[{key:"uuid",value:this.id}])}ngOnInit(){this.id&&this.loadData()}loadData(){this.loading=!0,this.templateService.getTemplate(this.id).subscribe({next:t=>{var i,n,l,m,s,c,d,g,f;this.loading=!1,this.guidelines=t.data.guidelines,this.header=t.data.header,this.footer=t.data.footer,this.on_submit_email=t.data.on_submit_email,this.on_submit_message=t.data.on_submit_message,null===(i=this.generalFormGroup.get("form_name"))||void 0===i||i.setValue(t.data.form_name),null===(n=this.generalFormGroup.get("open_date"))||void 0===n||n.setValue(t.data.open_date),null===(l=this.generalFormGroup.get("close_date"))||void 0===l||l.setValue(t.data.close_date),null===(m=this.guidlinesFormGroup.get("guidelines"))||void 0===m||m.setValue(t.data.guidelines),this.fields=t.data.data,null===(s=this.dataFormGroup.get("data"))||void 0===s||s.setValue(JSON.stringify(t.data.data)),null===(c=this.headerFormGroup.get("header"))||void 0===c||c.setValue(t.data.header),null===(d=this.footerFormGroup.get("footer"))||void 0===d||d.setValue(t.data.footer),null===(g=this.onSubmitFormGroup.get("on_submit_email"))||void 0===g||g.setValue(t.data.on_submit_email),null===(f=this.onSubmitFormGroup.get("on_submit_message"))||void 0===f||f.setValue(t.data.on_submit_message)},error:t=>{this.loading=!1}})}setFields(t){this.fields=t}setFormField(t,i,n){let l=null;switch(t){case"general":l=this.generalFormGroup;break;case"guidelines":l=this.guidlinesFormGroup;break;case"data":l=this.dataFormGroup,n=JSON.stringify(n);break;case"header":l=this.headerFormGroup;break;case"footer":l=this.footerFormGroup;break;case"on_submit":l=this.onSubmitFormGroup}l&&l.get(i)?.setValue(n)}submit(){var t,i,n,l,m,s,c,d,g,f,F,U,G,Q,E;const u=new FormData;if(!this.generalFormGroup.valid)return void alert("Please check the form name, open date and close date fields to make sure they were filled correctly");!(null===(t=this.generalFormGroup.get("form_name"))||void 0===t)&&t.value&&u.append("form_name",this.generalFormGroup.get("form_name").value),!(null===(i=this.generalFormGroup.get("open_date"))||void 0===i)&&i.value&&u.append("open_date",null===(n=this.generalFormGroup.get("open_date"))||void 0===n?void 0:n.value),null!==(l=this.generalFormGroup.get("close_date"))&&void 0!==l&&l.value&&u.append("close_date",null===(m=this.generalFormGroup.get("close_date"))||void 0===m?void 0:m.value),this.guidlinesFormGroup.valid&&!(null===(s=this.guidlinesFormGroup.get("guidelines"))||void 0===s)&&s.value&&u.append("guidelines",null===(c=this.guidlinesFormGroup.get("guidelines"))||void 0===c?void 0:c.value),u.append("data",JSON.stringify(this.fields)),this.headerFormGroup.valid&&!(null===(d=this.headerFormGroup.get("header"))||void 0===d)&&d.value&&u.append("header",null===(g=this.headerFormGroup.get("header"))||void 0===g?void 0:g.value),this.footerFormGroup.valid&&!(null===(f=this.footerFormGroup.get("footer"))||void 0===f)&&f.value&&u.append("footer",null===(F=this.footerFormGroup.get("footer"))||void 0===F?void 0:F.value),this.onSubmitFormGroup.valid&&(!(null===(U=this.onSubmitFormGroup.get("on_submit_email"))||void 0===U)&&U.value&&u.append("on_submit_email",null===(G=this.onSubmitFormGroup.get("on_submit_email"))||void 0===G?void 0:G.value),!(null===(Q=this.onSubmitFormGroup.get("on_submit_message"))||void 0===Q)&&Q.value&&u.append("on_submit_message",null===(E=this.onSubmitFormGroup.get("on_submit_message"))||void 0===E?void 0:E.value)),this.notify.showLoading();let Y=this.dbService.post(this.formUrl,u);this.id&&(u.append("id",this.id),Y=this.dbService.put(`${this.formUrl}`,u)),Y.pipe((0,V.q)(1)).subscribe({next:S=>{this.notify.successNotification("Submitted successfully"),this.notify.hideLoading(),this.router.navigate(["/application-templates"])},error:S=>{this.notify.hideLoading(),console.log(S)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(h.F0),e.Y36(q.c),e.Y36(w.O),e.Y36(J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-template-form"]],decls:87,vars:31,consts:[["orientation","vertical",3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup"],[1,"flex","flex-col","gap-1","pt-2"],["appearance","outline"],["matInput","","formControlName","form_name","name","form_name","required",""],[4,"ngIf"],[1,"flex","flex-col","gap-1"],["type","date","name","open_date","formControlName","open_date","required",""],["type","date","name","close_date","formControlName","close_date","required",""],["mat-raised-button","","color","primary","matStepperNext",""],["for",""],[3,"name","value","valueChange"],["mat-stroked-button","","color","warn","matStepperPrevious",""],[3,"fields","formChanged"],["type","button","mat-raised-button","","color","primary","matStepperNext","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-stepper",0,1)(2,"mat-step",2),e.YNc(3,Ye,1,0,"ng-template",3),e.TgZ(4,"form",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Form Name*"),e.qZA(),e._UZ(9,"input",7),e.YNc(10,Se,2,0,"mat-error",8),e.qZA(),e.TgZ(11,"div",9)(12,"mat-label"),e._uU(13,"Open From"),e.qZA(),e._UZ(14,"input",10),e.YNc(15,$e,2,0,"mat-error",8),e.qZA(),e.TgZ(16,"div",9)(17,"mat-label"),e._uU(18,"Closes On:"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,He,2,0,"mat-error",8),e.qZA()(),e.TgZ(21,"button",12),e._uU(22,"Next"),e.qZA()()(),e.TgZ(23,"mat-step"),e.YNc(24,Ke,1,0,"ng-template",3),e.TgZ(25,"form",4)(26,"label",13),e._uU(27,"(Optional) Type any instructions you want your users to read about the form before they fill it. This will be available as a link on the form. "),e.qZA(),e.TgZ(28,"app-ckeditor",14),e.NdJ("valueChange",function(l){return i.setFormField("guidelines","guidelines",l)}),e.qZA(),e.YNc(29,Pe,2,0,"mat-error",8),e.TgZ(30,"div")(31,"button",15),e._uU(32,"Back"),e.qZA(),e.TgZ(33,"button",12),e._uU(34,"Next"),e.qZA()()()(),e.TgZ(35,"mat-step"),e.YNc(36,Re,1,0,"ng-template",3),e.TgZ(37,"form",4)(38,"label",13),e._uU(39,"Use the controls below to add/arrange the form fields"),e.qZA(),e.TgZ(40,"app-form-editor",16),e.NdJ("formChanged",function(l){return i.setFormField("data","data",l)}),e.qZA(),e.YNc(41,Ve,2,0,"mat-error",8),e.qZA(),e.TgZ(42,"div")(43,"button",15),e._uU(44,"Back"),e.qZA(),e.TgZ(45,"button",12),e._uU(46,"Next"),e.qZA()()(),e.TgZ(47,"mat-step",2),e.YNc(48,je,1,0,"ng-template",3),e.TgZ(49,"label",13),e._uU(50,"The header of the form. This can contain the title, logo, or any content"),e.qZA(),e.TgZ(51,"form",4)(52,"app-ckeditor",14),e.NdJ("valueChange",function(l){return i.setFormField("header","header",l)}),e.qZA(),e.YNc(53,De,2,0,"mat-error",8),e.TgZ(54,"div")(55,"button",15),e._uU(56,"Back"),e.qZA(),e.TgZ(57,"button",12),e._uU(58,"Next"),e.qZA()()()(),e.TgZ(59,"mat-step",2),e.YNc(60,Le,1,0,"ng-template",3),e.TgZ(61,"form",4)(62,"label",13),e._uU(63,"The footer of the form. It can contain any message"),e.qZA(),e.TgZ(64,"app-ckeditor",14),e.NdJ("valueChange",function(l){return i.setFormField("footer","footer",l)}),e.qZA(),e.YNc(65,ze,2,0,"mat-error",8),e.TgZ(66,"div")(67,"button",15),e._uU(68,"Back"),e.qZA(),e.TgZ(69,"button",12),e._uU(70,"Next"),e.qZA()()()(),e.TgZ(71,"mat-step",2),e.YNc(72,Be,1,0,"ng-template",3),e.TgZ(73,"form",4)(74,"label",13),e._uU(75,"Email to send to user after form is submitted"),e.qZA(),e.TgZ(76,"app-ckeditor",14),e.NdJ("valueChange",function(l){return i.setFormField("on_submit","on_submit_email",l)}),e.qZA(),e.YNc(77,We,2,0,"mat-error",8),e.TgZ(78,"label",13),e._uU(79,"Message to display after form is submitted"),e.qZA(),e.TgZ(80,"app-ckeditor",14),e.NdJ("valueChange",function(l){return i.setFormField("on_submit","on_submit_message",l)}),e.qZA(),e.YNc(81,Xe,2,0,"mat-error",8),e.TgZ(82,"div")(83,"button",15),e._uU(84,"Back"),e.qZA(),e.TgZ(85,"button",17),e.NdJ("click",function(){return i.submit()}),e._uU(86,"Submit"),e.qZA()()()()()),2&t){let n,l,m,s,c,d,g,f,F;e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",i.generalFormGroup),e.xp6(2),e.Q6J("formGroup",i.generalFormGroup),e.xp6(6),e.Q6J("ngIf",i.generalFormGroup&&(null==(n=i.generalFormGroup.get("form_name"))?null:n.hasError("required"))),e.xp6(5),e.Q6J("ngIf",i.generalFormGroup&&(null==(l=i.generalFormGroup.get("open_date"))?null:l.hasError("required"))),e.xp6(5),e.Q6J("ngIf",i.generalFormGroup&&(null==(m=i.generalFormGroup.get("close_date"))?null:m.hasError("required"))),e.xp6(5),e.Q6J("formGroup",i.guidlinesFormGroup),e.xp6(3),e.Q6J("name","guidelines")("value",i.guidelines),e.xp6(1),e.Q6J("ngIf",i.guidlinesFormGroup&&(null==(s=i.guidlinesFormGroup.get("guidelines"))?null:s.hasError("required"))),e.xp6(8),e.Q6J("formGroup",i.dataFormGroup),e.xp6(3),e.Q6J("fields",i.fields),e.xp6(1),e.Q6J("ngIf",i.dataFormGroup&&(null==(c=i.dataFormGroup.get("data"))?null:c.hasError("required"))),e.xp6(6),e.Q6J("stepControl",i.headerFormGroup),e.xp6(4),e.Q6J("formGroup",i.headerFormGroup),e.xp6(1),e.Q6J("name","header")("value",i.header),e.xp6(1),e.Q6J("ngIf",i.headerFormGroup&&(null==(d=i.headerFormGroup.get("header"))?null:d.hasError("required"))),e.xp6(6),e.Q6J("stepControl",i.footerFormGroup),e.xp6(2),e.Q6J("formGroup",i.footerFormGroup),e.xp6(3),e.Q6J("name","footer")("value",i.footer),e.xp6(1),e.Q6J("ngIf",i.footerFormGroup&&(null==(g=i.footerFormGroup.get("footer"))?null:g.hasError("required"))),e.xp6(6),e.Q6J("stepControl",i.onSubmitFormGroup),e.xp6(2),e.Q6J("formGroup",i.onSubmitFormGroup),e.xp6(3),e.Q6J("name","on_submit_email")("value",i.on_submit_email),e.xp6(1),e.Q6J("ngIf",i.onSubmitFormGroup&&(null==(f=i.onSubmitFormGroup.get("on_submit_email"))?null:f.hasError("required"))),e.xp6(3),e.Q6J("name","on_submit_message")("value",i.on_submit_message),e.xp6(1),e.Q6J("ngIf",i.onSubmitFormGroup&&(null==(F=i.onSubmitFormGroup.get("on_submit_message"))?null:F.hasError("required")))}},dependencies:[_.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,v.lW,x.KE,x.hX,x.TO,y.Nt,Z.C0,Z.VY,Z.Vq,Z.Ic,Z.fd,O.s,ke,r.sg,r.u]}),o})();var et=p(1481),tt=p(8424),ot=p(7057);function it(o,a){1&o&&e._UZ(0,"app-loading")}function nt(o,a){if(1&o&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e._UZ(2,"div",3)(3,"app-form-generator",4)(4,"div",3),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.header,e.oJD),e.xp6(1),e.Q6J("fields",t.data.data),e.xp6(1),e.Q6J("innerHTML",t.footer,e.oJD)}}function at(o,a){if(1&o&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h3"),e._uU(3,"Email sent after form is submitted"),e.qZA(),e._UZ(4,"div",3),e.TgZ(5,"h3"),e._uU(6,"Message displayed after form is submitted"),e.qZA(),e._UZ(7,"div",3),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("innerHTML",t.on_submit_email,e.oJD),e.xp6(3),e.Q6J("innerHTML",t.on_submit_message,e.oJD)}}const lt=[{path:"",component:R,data:{title:"Manage templates"}},{path:"form",component:k,data:{title:"Add a new template"}},{path:"form/:id",component:k,data:{title:"Edit template"}},{path:"preview/:id",component:(()=>{class o{constructor(t,i,n){this.templateService=i,this.sanitizer=n,this.title="Add a new practitioner",this.formUrl="applications/templates",this.existingUrl="applications/templates",this.loading=!1,this.data=null,this.header="",this.footer="",this.on_submit_email="",this.on_submit_message="",this.guidelines="",this.id=t.snapshot.params.id,this.id&&(this.title="Edit application template",this.existingUrl=`applications/templates/${this.id}`,this.formUrl=`applications/templates/${this.id}`)}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.templateService.getTemplate(this.id).subscribe({next:t=>{this.loading=!1,this.data=t.data,this.header=this.sanitizer.bypassSecurityTrustHtml(this.data.header),this.footer=this.sanitizer.bypassSecurityTrustHtml(this.data.footer),this.on_submit_email=this.sanitizer.bypassSecurityTrustHtml(this.data.on_submit_email),this.on_submit_message=this.sanitizer.bypassSecurityTrustHtml(this.data.on_submit_message),this.guidelines=this.sanitizer.bypassSecurityTrustHtml(this.data.guidelines)},error:t=>{this.loading=!1,this.data=null}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(J),e.Y36(et.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-preview-template"]],decls:11,vars:5,consts:[[1,"flex","flex-col","gap-1"],["mat-raised-button","","color","primary",3,"routerLink"],[4,"ngIf"],[3,"innerHTML"],[3,"fields"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"Edit this template"),e.qZA(),e.YNc(3,it,1,0,"app-loading",2),e.YNc(4,nt,5,3,"mat-card",2),e.YNc(5,at,8,2,"mat-card",2),e.TgZ(6,"mat-card")(7,"mat-card-content")(8,"h3"),e._uU(9,"Guidlines"),e.qZA(),e._UZ(10,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.MGl("routerLink","/application-templates/form/",i.id,""),e.xp6(2),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.data),e.xp6(1),e.Q6J("ngIf",i.on_submit_email||i.on_submit_message),e.xp6(5),e.Q6J("innerHTML",i.guidelines,e.oJD))},dependencies:[_.O5,h.rH,b.a8,b.dn,v.zs,tt.N,ot.C]}),o})(),data:{title:"Preview template"}}];let rt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(lt),h.Bz]}),o})();var mt=p(7410);let pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.ez,rt,mt.m]}),o})()}}]);